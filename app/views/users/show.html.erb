<div class="profile-page-background">
  <div class="profile-page">
    <h1 class="profile-username"><%= @user.username %>のプロフィール</h1>

    <div class="profile-image-container">
      <% if @user.profile_image.attached? %>
        <%= image_tag @user.profile_image.variant(resize_to_fill: [300, 300]), class: "profile-image" %>
      <% else %>
        <%= image_tag 'no_image_photo.jpg', size: "300x300", class: "profile-image" %>
      <% end %>
    </div>

    <div class="profile-details">
      <table class="profile-table">
        <tr>
          <th>ユーザーネーム</th>
          <td><%= @user.username.presence || '未設定' %></td>
        </tr>
        <tr>
          <th>性別</th>
          <td><%= @user.gender.presence || '未設定' %></td>
        </tr>
        <tr>
          <th>年齢</th>
          <td><%= @user.age.presence || '未設定' %></td>
        </tr>
        <tr>
          <th>誕生日</th>
          <td><%= @user.birthdate.presence || '未設定' %></td>
        </tr>
        <tr>
          <th>自己紹介</th>
          <td><%= @user.bio.presence || '未設定' %></td>
        </tr>
      </table>
    </div>

    <div class="profile-actions">
      <%= link_to 'プロフィールを編集', edit_user_path(@user), class: 'btn btn-primary' %>
    </div>
  </div>

  <div class="profile-post-page">
    <h2 class="profile-posts-title">あなたの投稿一覧</h2>
    <div class="new-post-link">
      <%= link_to '新規投稿', new_post_path, class: 'btn btn-primary' %>
    </div>

    <div class="posts-grid">
      <% if @posts.any? %>
        <% @posts.each do |post| %>
          <div class="post-item">
            <h3 class="post-title"><%= link_to post.title, post_path(post) %></h3>
            <p class="post-description"><%= post.description %></p>
            <p class="post-date"><%= post.created_at.in_time_zone('Asia/Tokyo').strftime("%Y年%m月%d日 %H:%M") %></p>
            <% if post.image.attached? %>
              <p class="post-image"><%= image_tag post.display_image %></p>
            <% else %>
              <p class="post-image"><%= image_tag 'no_image_photo1.jpg' %></p>
            <% end %>
          </div>
        <% end %>
      <% else %>
        <p class="no-posts">まだ投稿はありません。</p>
      <% end %>
    </div>
    <%= paginate @posts, theme: 'bootstrap4' %>
  </div>
</div>
